import React from "react";
import { useState } from "react";
import { useEffect } from "react";
import { Link } from "react-router-dom";
import CONSTANTS from "../../constant/constant";

function RdvItemAgenda({ rdv, rdvType }) {
  const [classRdv, setClassRdv] = useState("");

  useEffect(() => {
    rdvType(rdv);
    // console.log(rdv);

    // Generate class
    const top = Number(rdv.start.slice(14, 15)) * 10;

    // console.log(rdv.start, top);

    const topClass =
      top >= 0 && top < 10
        ? "_00"
        : top >= 10 && top < 20
        ? "_10"
        : top >= 20 && top < 30
        ? "_20"
        : top >= 30 && top < 40
        ? "_30"
        : top >= 40 && top < 50
        ? "_40"
        : top >= 50 && top < 60
        ? "_50"
        : "-";
    setClassRdv(topClass + " " + rdvType(rdv));
  }, [rdv, rdvType]);

  return (

    <Link to={`rdv/${rdv.id}`} className={`rdv-item _10 normal-rdv`}>
        <div className="item-info">
          <p>
            {rdv.start.slice(11, 16)} {rdv.patient.nom_pat} {rdv.patient.prenom_pat}

          </p>

          {console.log("rdvs************: ", rdv)}
        </div>


        <div>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="16" height="16" rx="8" fill="#C989DD" fill-opacity="0.18"/>
            <path d="M6.43478 7.61538C5.97354 7.61538 5.53118 7.41278 5.20503 7.05213C4.87888 6.69148 4.69565 6.20234 4.69565 5.69231V4.15385C4.69565 4.05184 4.7323 3.95401 4.79753 3.88188C4.86276 3.80975 4.95123 3.76923 5.04348 3.76923H5.3913C5.48355 3.76923 5.57202 3.72871 5.63725 3.65658C5.70248 3.58445 5.73913 3.48662 5.73913 3.38462C5.73913 3.28261 5.70248 3.18478 5.63725 3.11265C5.57202 3.04052 5.48355 3 5.3913 3H5.04348C4.76673 3 4.50132 3.12157 4.30563 3.33795C4.10994 3.55434 4 3.84783 4 4.15385V5.69231C4.00045 6.12682 4.09627 6.55472 4.27923 6.93926C4.4622 7.3238 4.72684 7.65348 5.05043 7.9C5.36133 8.20309 5.61346 8.57269 5.79161 8.98651C5.96976 9.40032 6.07023 9.84976 6.08696 10.3077C6.08696 11.0217 6.34348 11.7065 6.80009 12.2114C7.2567 12.7163 7.87599 13 8.52174 13C9.16748 13 9.78678 12.7163 10.2434 12.2114C10.7 11.7065 10.9565 11.0217 10.9565 10.3077V9.86923C11.2844 9.77562 11.5701 9.55299 11.7602 9.24307C11.9503 8.93316 12.0316 8.55724 11.9889 8.18577C11.9462 7.8143 11.7825 7.4728 11.5284 7.22526C11.2743 6.97773 10.9473 6.84116 10.6087 6.84116C10.2701 6.84116 9.94305 6.97773 9.68896 7.22526C9.43487 7.4728 9.27115 7.8143 9.22848 8.18577C9.18581 8.55724 9.26712 8.93316 9.45718 9.24307C9.64724 9.55299 9.93299 9.77562 10.2609 9.86923V10.3077C10.2609 10.8177 10.0776 11.3069 9.75149 11.6675C9.42534 12.0282 8.98298 12.2308 8.52174 12.2308C8.06049 12.2308 7.61814 12.0282 7.29199 11.6675C6.96584 11.3069 6.78261 10.8177 6.78261 10.3077C6.80021 9.84919 6.90177 9.3994 7.08113 8.98556C7.26049 8.57171 7.51392 8.20241 7.82609 7.9C8.14839 7.65263 8.41168 7.32257 8.59341 6.93808C8.77514 6.5536 8.86989 6.12614 8.86956 5.69231V4.15385C8.86956 3.84783 8.75963 3.55434 8.56394 3.33795C8.36825 3.12157 8.10283 3 7.82609 3H7.47826C7.38601 3 7.29754 3.04052 7.23231 3.11265C7.16708 3.18478 7.13043 3.28261 7.13043 3.38462C7.13043 3.48662 7.16708 3.58445 7.23231 3.65658C7.29754 3.72871 7.38601 3.76923 7.47826 3.76923H7.82609C7.91833 3.76923 8.00681 3.80975 8.07204 3.88188C8.13727 3.95401 8.17391 4.05184 8.17391 4.15385V5.69231C8.17391 5.94485 8.12893 6.19492 8.04153 6.42824C7.95413 6.66156 7.82603 6.87355 7.66453 7.05213C7.50304 7.2307 7.31132 7.37236 7.10032 7.469C6.88932 7.56564 6.66317 7.61538 6.43478 7.61538ZM10.6087 9.15385C10.4242 9.15385 10.2473 9.0728 10.1168 8.92854C9.98633 8.78429 9.91304 8.58863 9.91304 8.38462C9.91304 8.1806 9.98633 7.98495 10.1168 7.84069C10.2473 7.69643 10.4242 7.61538 10.6087 7.61538C10.7932 7.61538 10.9701 7.69643 11.1006 7.84069C11.2311 7.98495 11.3043 8.1806 11.3043 8.38462C11.3043 8.58863 11.2311 8.78429 11.1006 8.92854C10.9701 9.0728 10.7932 9.15385 10.6087 9.15385Z" fill="#C989DD"/>
          </svg>
        </div>
    </Link>
  );
}

export default RdvItemAgenda;
